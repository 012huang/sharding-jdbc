<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>开发者指南</title>
    
    <link href="//cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
    
    
    <link href="http://dangdangdotcom.github.io/sharding-jdbc/css/landing-page.css" rel="stylesheet">
    
    
    
    
    <style>
    .navbar {
    border-color: #e7e7e7;
}

.content-section-a,
footer,
.navbar {
    background-color: #f8f8f8;
    color: #333;
}

.navbar a:link,
.navbar-default .navbar-nav>li>a {
    color: #777;
}

.navbar a:hover,
.navbar-default .navbar-nav>li>a:hover {
    color: rgb(51, 51, 51);
}

.content-section-b {
    background-color: white;
    color: #333;
}

body {
    color: rgb(51, 51, 51);
}

.header-container h1,
.header-container h2,
.header-container h3,
.header-container h4 {
    color: rgb(51, 51, 51);
}

  </style>
    <link href="//cdn.bootcss.com/prism/1.4.1/themes/prism.min.css" rel="stylesheet">
    <link href="http://dangdangdotcom.github.io/sharding-jdbc/css/table.css" rel="stylesheet">
</head>
<body>

<style>
    .container {
        width: 95%;
    }
</style>

<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="page-scroll navbar-brand" href="#intro">Sharding-JDBC</a>
        </div>
        
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a class="page-scroll" href=https://github.com/dangdangdotcom/sharding-jdbc>Github</a>
                </li>
                <li>
                    <a class="page-scroll" href=http://dangdangdotcom.github.io/sharding-jdbc>Docs</a>
                </li>
                <li>
                    <a class="page-scroll" href=https://github.com/dangdangdotcom>DangDang</a>
                </li>
            </ul>
        </div>
        
    </div>
    
</nav>


<section id="services">
   <div class="content-section-a">

      <div class="container">
        <div class="clearfix"></div>
        <div class="row">
	
              <div class="col-sm-8">
		 

<p>本文档帮助开发者搭建开发环境并贡献代码，示例和文档</p>

<h1 id="编译代码:68ff842f88ebfba73c833f4e171f79e3">编译代码</h1>

<p><code>Sharding-JDBC</code>的代码编译需要<code>Maven</code>，请保证IDE中正确配置了它。
代码用到的所有依赖完全都可以从公网下载，请根据自身的网络情况选择合理的镜像。</p>

<p>代码使用了<a href="https://projectlombok.org/download.html">Lombok</a>来生成类属性的访问方法，构造器等。
故请以上从链接内容来获取适合你的IDE的解决方法。</p>

<h1 id="代码结构-待完善:68ff842f88ebfba73c833f4e171f79e3">代码结构（待完善&hellip;)</h1>

<h1 id="文档生成:68ff842f88ebfba73c833f4e171f79e3">文档生成</h1>

<p>文档使用博客生成引擎<a href="https://gohugo.io/">HUGO</a>，请根据文档安装环境。
文档全部在<code>sharding-jdbc/shardig-jdbc-doc/content/post</code>目录中。</p>

<h1 id="贡献方法:68ff842f88ebfba73c833f4e171f79e3">贡献方法</h1>

<p>请按照下面的步骤贡献代码，示例和文档</p>

<ul>
<li>所有的问题与新功能请使用<a href="https://github.com/dangdangdotcom/sharding-jdbc/issues">Issue Page</a>进行管理</li>
<li>任何人想要开发任何功能，请先回复该功能所关联的Issue，表明你当前正在这个Issue上工作。
并在回复的时候为自己设置一个deadline，并添加的回复内容中</li>
<li>在核心贡献者找到一个<code>导师(shepherd)</code>，导师会在设计与功能实现上给予即时的反馈。
现阶段导师为QQ群中<code>当当架构师</code>，如果你没有熟悉的架构师，请联系 <strong>高洪涛(QQ:305653740)</strong></li>
<li>你应该新建一个分支来开始你的工作，分支的名字为<code>功能名称/issueId</code>。
例如，你想完成一个SQL解析(parser)功能中 <strong>Issue 111</strong>，那么你的branch名字应为 <strong>parser/111</strong>。
功能名称与<code>导师</code>讨论后确定</li>
<li>完成后，发送一个<code>pull request</code>到<code>dangdangdotcom/sharding-jdbc</code>，
接着<code>导师</code>做<code>CodeReview</code>，然后他会与你讨论一些细节（包括设计，实现，性能等）。当团队中所有人员对本次修改满意后，<code>导师</code>会将提交合并到<code>master</code>分支。</li>
<li>最后，恭喜您已经成为了<code>Sharding-JDBC</code>的<code>官方贡献者</code>！</li>
</ul>

<h1 id="开发理念:68ff842f88ebfba73c833f4e171f79e3">开发理念</h1>

<ul>
<li>用心写代码，提炼真正的非功能性需求</li>
<li>代码整洁干净到极致, 请参见《重构》和《代码整洁之道》</li>
<li>极简代码, 高度复用，无重复代码和配置</li>
<li>代码应在同一抽象层级</li>
<li>修改功能时多考虑影响面, 不可留下没修改完全的部分</li>
<li>只有一个需求时，不需扩展性。两个类似需求时, 再提炼扩展性</li>
</ul>

<h1 id="开发行为规范:68ff842f88ebfba73c833f4e171f79e3">开发行为规范</h1>

<ul>
<li>提交之前先确定模块的测试套件，并使用测试覆盖率工具检查覆盖率不能低于<code>master分支的覆盖率</code></li>
<li>使用<code>Checkstyle</code>检查代码, 违反验证规则的需要有特殊理由。模板位置在<code>sharding-jdbc/src/resources/dd_checks.xml</code></li>
<li>执行<code>mvn clean install</code>可以测试和编译通过</li>
<li>及时删除无用代码</li>
</ul>

<h1 id="编码规范:68ff842f88ebfba73c833f4e171f79e3">编码规范</h1>

<ul>
<li>写代码之前看一下系统已有的代码, 保持风格和使用方式一致</li>
<li>变量命名要有意义, 如果方法只有唯一的返回值, 使用result命名返回值. 循环中使用each命名循环变量, map中使用entry代替each</li>
<li>嵌套循环尽量提成方法</li>
<li>优先使用卫语句</li>
<li>配置文件使用驼峰命名, 文件名首字母小写</li>
<li>类和方法的访问权限控制为最小, 例如: 可以设为包私有的就不用public</li>
<li>方法所用到的私有方法应紧跟着该方法, 如果有多个私有方法, 书写私有方法应与私有方法在原方法的出现顺序相同</li>
<li>优先使用guava而非apache commons, 如：优先使用Strings而非StringUtils</li>
<li>优先使用lombok代替构造器, get, set, log方法</li>
<li>使用linux换行符</li>
<li>缩进（包含空行）和上一行保持一致</li>
<li>不应有无意义的空行</li>
<li>方法入参和返回值不允许为null，如有特殊情况需注释说明</li>
<li>需要注释解释的代码尽量提成小方法，用方法名称解释，注释应只包含javadoc和todo，fixme等</li>
<li>禁止使用static import</li>
<li>不需要公开的类放入internal包，包中类尽量包私有</li>
<li>日志一律使用英文</li>
<li>使用annotation获取spring的业务bean</li>
<li>如果模块中有公用的切入点，应在模块一级路径创建pointcut包</li>
<li>属性配置项需要添加到各个模块的常量枚举中</li>
</ul>

<h1 id="单元测试规范:68ff842f88ebfba73c833f4e171f79e3">单元测试规范</h1>

<ul>
<li>测试代码和生产代码需遵守相同代码规范</li>
<li>如无特殊理由, 测试需全覆盖</li>
<li>准备环境的代码和测试代码分离</li>
<li>单数据断言, 应使用assertTrue, assertFalse, assertNull, assertNotNull</li>
<li>多数据断言, 应使用assertThat</li>
<li>精确断言, 尽量不使用not, containsString断言</li>
<li>调用业务方法的变量, 应命名为actualXXX, 期望值应命名为expectedXXX</li>
<li>只有junit assertXXX, hamcrest, mocktio相关可以使用static import</li>
</ul>

	</div>
	<div class="col-sm-3 col-sm-offset-1 doc-sidebar">
		 <nav id="TableOfContents">
<ul>
<li><a href="#编译代码:68ff842f88ebfba73c833f4e171f79e3">编译代码</a></li>
<li><a href="#代码结构-待完善:68ff842f88ebfba73c833f4e171f79e3">代码结构（待完善&hellip;)</a></li>
<li><a href="#文档生成:68ff842f88ebfba73c833f4e171f79e3">文档生成</a></li>
<li><a href="#贡献方法:68ff842f88ebfba73c833f4e171f79e3">贡献方法</a></li>
<li><a href="#开发理念:68ff842f88ebfba73c833f4e171f79e3">开发理念</a></li>
<li><a href="#开发行为规范:68ff842f88ebfba73c833f4e171f79e3">开发行为规范</a></li>
<li><a href="#编码规范:68ff842f88ebfba73c833f4e171f79e3">编码规范</a></li>
<li><a href="#单元测试规范:68ff842f88ebfba73c833f4e171f79e3">单元测试规范</a></li>
</ul>
</nav>
	</div>
        </div>
    </div>
</div>
</div>

</section>

<footer>
    <div class="container">
        <div class="row">
            <div class="col-md-8">
                <p class="copyright text-muted small">Copyright &copy; 开发者指南 All Rights Reserved</p>
            </div>
            <div class="col-md-4">
            </div>
        </div>
    </div>
</footer>

<script src="//cdn.bootcss.com/jquery/1.12.0/jquery.min.js"></script>


<script src="//cdn.bootcss.com/jquery-easing/1.3/jquery.easing.min.js"></script>


<script src="//cdn.bootcss.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<script src="//cdn.bootcss.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<script src="//cdn.bootcss.com/prism/1.4.1/prism.min.js"></script>
<script src="//cdn.bootcss.com/prism/1.4.1//components/prism-java.min.js"></script>
<script src="//cdn.bootcss.com/prism/1.4.1//components/prism-sql.min.js"></script>
<script src="//cdn.bootcss.com/prism/1.4.1//components/prism-groovy.min.js"></script>
<script src="//cdn.bootcss.com/prism/1.4.1//components/prism-yaml.min.js"></script>


</body>
</html>

